<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Game Coach Dashboard</title>

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: radial-gradient(circle at top, #3b0066, #0b0014);
    color: #fff;
}

h1 {
    text-align: center;
    color: #00fff0;
    text-shadow: 0 0 15px #00fff0;
}

.container {
    max-width: 900px;
    margin: 30px auto;
    background: rgba(0,0,0,0.7);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 0 30px #00fff0;
}

input, select {
    width: 100%;
    padding: 14px;
    border-radius: 10px;
    border: none;
    margin: 8px 0;
    font-size: 16px;
}

button {
    width: 100%;
    padding: 16px;
    margin-top: 20px;
    font-size: 18px;
    border-radius: 14px;
    background: linear-gradient(90deg, #00ffe1, #00b7ff);
    border: none;
    cursor: pointer;
    font-weight: bold;
}

button:hover {
    transform: scale(1.03);
}

.section {
    margin-top: 25px;
    padding: 20px;
    background: rgba(0,0,0,0.8);
    border-radius: 15px;
    box-shadow: 0 0 15px #00fff0;
}

.section h2 {
    color: #00fff0;
}

ul {
    line-height: 1.8;
}
</style>
</head>

<body>

<h1>üéÆ AI Game Coach Dashboard</h1>

<div class="container">

<select id="game">
    <option value="snake">Snake & Ladder</option>
    <option value="uno">UNO</option>
    <option value="chess">Chess</option>
    <option value="ludo">Ludo</option>
</select>

<input type="number" id="matches" placeholder="Matches Played">
<input type="number" id="wins" placeholder="Wins">
<input type="number" id="mistakes" placeholder="Mistakes">
<input type="number" id="endgame" placeholder="Endgame Losses">
<input type="number" id="safe" placeholder="Safe Moves">
<input type="number" id="risky" placeholder="Risky Moves">

<button onclick="getFeedback()">Get AI Feedback</button>

<div id="result"></div>

</div>

<script>
async function getFeedback() {
    const payload = {
        game: document.getElementById("game").value,
        matches: Number(matches.value),
        wins: Number(wins.value),
        mistakes: Number(mistakes.value),
        endgame_losses: Number(endgame.value),
        safe_moves: Number(safe.value),
        risky_moves: Number(risky.value)
    };

    try {
        const res = await fetch("https://ai-game-coach-backend.onrender.com/analyze", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
        });

        const data = await res.json();
        renderStrategies(payload, data.feedback);

    } catch {
        alert("Backend not responding. Please wait or refresh.");
    }
}

function renderStrategies(input, feedback) {

    let winRate = ((input.wins / input.matches) * 100).toFixed(1);

    document.getElementById("result").innerHTML = `
    <div class="section">
        <h2>üìä Performance Analysis</h2>
        <ul>
            <li>Win Rate: <b>${winRate}%</b></li>
            <li>${winRate > 70 ? "High performance ‚Äì maintain consistency." :
                winRate > 40 ? "Moderate performance ‚Äì improve mistakes." :
                "Low performance ‚Äì strategy overhaul needed."}
            </li>
        </ul>
    </div>

    <div class="section">
        <h2>‚öñÔ∏è Risk Management Strategy</h2>
        <ul>
            <li>Safe Moves: ${input.safe_moves}</li>
            <li>Risky Moves: ${input.risky_moves}</li>
            <li>${input.risky_moves > input.safe_moves
                ? "Reduce risky decisions and focus on safe plays."
                : "Good balance between safety and aggression."}
            </li>
        </ul>
    </div>

    <div class="section">
        <h2>üéØ Game-Specific Strategy</h2>
        <ul>
            ${getGameStrategy(input.game)}
        </ul>
    </div>

    <div class="section">
        <h2>ü™ú Step-by-Step Improvement Plan</h2>
        <ol>
            <li>Analyze past mistakes after each match.</li>
            <li>Reduce risky moves during endgame phases.</li>
            <li>Focus on safe positioning before aggressive plays.</li>
            <li>Track opponent patterns and adapt strategies.</li>
            <li>Review AI feedback weekly and adjust gameplay.</li>
        </ol>
    </div>

    <div class="section">
        <h2>ü§ñ AI Coach Summary</h2>
        <p>${feedback}</p>
    </div>
    `;
}

function getGameStrategy(game) {
    if (game === "snake") {
        return `
        <li>Avoid high-risk rolls near snakes.</li>
        <li>Use ladders strategically rather than chasing them.</li>
        <li>Maintain position control over speed.</li>`;
    }
    if (game === "uno") {
        return `
        <li>Track opponent card colors.</li>
        <li>Save wild cards for critical turns.</li>
        <li>Force opponents to draw cards early.</li>`;
    }
    if (game === "chess") {
        return `
        <li>Control the center in openings.</li>
        <li>Avoid early queen exposure.</li>
        <li>Plan endgame pawn structures.</li>`;
    }
    if (game === "ludo") {
        return `
        <li>Prioritize bringing all tokens out.</li>
        <li>Use safe zones effectively.</li>
        <li>Block opponents strategically.</li>`;
    }
}
</script>

</body>
</html>
